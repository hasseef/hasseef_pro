<!doctype html><html lang="ar" dir="rtl"><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>سوق المرافق — حصيف</title>
<link rel="stylesheet" href="../assets/css/style.css"/>
</head><body><div class="container">
<h2>سوق المرافق</h2>
<div class="toolbar">
  <input class="input" id="q" placeholder="ابحث باسم المرفق/المدينة"/>
  <button class="btn" onclick="doFilter()">بحث</button>
  <button class="btn secondary" onclick="exportCSV()">تصدير CSV</button>
</div>
<div id="cards" class="grid grid-3"></div>
</div>
<script src="../assets/js/util.js"></script>
<script>
const data=[
 {name:'قاعة وطني', city:'الرياض', cap:600, price:12000, img:'https://picsum.photos/seed/a/400/220'},
 {name:'مسرح الابتكار', city:'جدة', cap:800, price:18000, img:'https://picsum.photos/seed/b/400/220'},
 {name:'مركز المؤتمرات', city:'الخبر', cap:1200, price:35000, img:'https://picsum.photos/seed/c/400/220'}
];
function render(list){
  const wrap=document.getElementById('cards'); wrap.innerHTML='';
  list.forEach(x=>{
    const el=document.createElement('div'); el.className='card';
    el.innerHTML=`<img src="${x.img}" alt="" style="width:100%;height:180px;object-fit:cover;border-radius:8px">
      <h3>${x.name}</h3>
      <div class="kpi"><span class="num">${x.cap}</span><span class="lbl">مقعد</span></div>
      <div class="muted">${x.city}</div>
      <div class="toolbar"><button class="btn" onclick="alert('تم إرسال طلب الحجز')">طلب حجز</button></div>`;
    wrap.appendChild(el);
  });
}
function doFilter(){
  const q=document.getElementById('q').value.trim().toLowerCase();
  render(data.filter(d=> (d.name+d.city).toLowerCase().includes(q)));
}
function exportCSV(){
  const rows=[['الاسم','المدينة','السعة','السعر']].concat(data.map(d=>[d.name,d.city,d.cap,d.price]));
  util.download('facilities.csv', util.toCSV(rows));
}
render(data);
</script></body></html>